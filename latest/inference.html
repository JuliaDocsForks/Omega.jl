<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Conditional Inference · Omega.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Omega.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="index.html">Home</a></li><li><a class="toctext" href="basictutorial.html">Basic Tutorial</a></li><li><a class="toctext" href="model.html">Modeling</a></li><li><a class="toctext" href="conditionalindependence.html">(Conditional) Independence</a></li><li class="current"><a class="toctext" href="inference.html">Conditional Inference</a><ul class="internal"><li><a class="toctext" href="#Conditional-Samples-1">Conditional Samples</a></li><li><a class="toctext" href="#Conditioning-with-cond-1">Conditioning with <code>cond</code></a></li><li><a class="toctext" href="#Conditioning-as-Prior-1">Conditioning as Prior</a></li></ul></li><li><a class="toctext" href="soft.html">Soft Execution</a></li><li><a class="toctext" href="causal.html">Causal Inference</a></li><li><a class="toctext" href="higher.html">Higher Order Inference</a></li><li><a class="toctext" href="distributions.html">Built-in Distributions</a></li><li><a class="toctext" href="omega.html">Omega</a></li><li><a class="toctext" href="cheatsheet.html">Cheat Sheet</a></li><li><a class="toctext" href="contrib.html">Contribution Guide</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href="inference.html">Conditional Inference</a></li></ul><a class="edit-page" href="https://github.com/zenna/Omega.jl/blob/master/docs/src/inference.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Conditional Inference</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Inference-1" href="#Inference-1">Inference</a></h1><p>Omega have several inference algorithms built in, and provides the mechanism to build your own.</p><h2><a class="nav-anchor" id="Conditional-Samples-1" href="#Conditional-Samples-1">Conditional Samples</a></h2><p>If you have a random variable <code>x</code> and a Boolean-valued random variable <code>y</code>, to sample from a conditional distribution use <code>rand(x,y)</code>.</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.rand" href="#Base.rand"><code>Base.rand</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>Random ω ∈ Ω</p></div></div><a class="source-link" target="_blank" href="https://github.com/zenna/Omega.jl/blob/849f8f613d8d41de8196576a9700c60b4f5aa16a/src/omega/omega.jl#L27">source</a><div><div><p>Sample <code>n</code> from <code>x</code></p></div></div><a class="source-link" target="_blank" href="https://github.com/zenna/Omega.jl/blob/849f8f613d8d41de8196576a9700c60b4f5aa16a/src/inference/rand.jl#L5">source</a><div><div><p>Sample 1 from <code>x</code></p></div></div><a class="source-link" target="_blank" href="https://github.com/zenna/Omega.jl/blob/849f8f613d8d41de8196576a9700c60b4f5aa16a/src/inference/rand.jl#L10">source</a><div><div><p><code>n</code> samples from <code>x</code> with rejection sampling</p></div></div><a class="source-link" target="_blank" href="https://github.com/zenna/Omega.jl/blob/849f8f613d8d41de8196576a9700c60b4f5aa16a/src/inference/rs.jl#L9">source</a><div><div><p>Sample <code>ω | y == true</code> with Metropolis Hasting</p></div></div><a class="source-link" target="_blank" href="https://github.com/zenna/Omega.jl/blob/849f8f613d8d41de8196576a9700c60b4f5aa16a/src/inference/mi.jl#L9">source</a><div><div><p>Sample from <code>x | y == true</code> with Single Site Metropolis Hasting</p></div></div><a class="source-link" target="_blank" href="https://github.com/zenna/Omega.jl/blob/849f8f613d8d41de8196576a9700c60b4f5aa16a/src/inference/ssmh.jl#L16">source</a><div><div><p>Sample from <code>x | y == true</code> with Hamiltonian Monte Carlo</p></div></div><a class="source-link" target="_blank" href="https://github.com/zenna/Omega.jl/blob/849f8f613d8d41de8196576a9700c60b4f5aa16a/src/inference/hmc.jl#L77">source</a><div><div><p>Sample from <code>x | y == true</code> with Hamiltonian Monte Carlo</p></div></div><a class="source-link" target="_blank" href="https://github.com/zenna/Omega.jl/blob/849f8f613d8d41de8196576a9700c60b4f5aa16a/src/inference/hmcfast.jl#L76">source</a><div><div><p>Sample from <code>ω | y == true</code> with Stochastic Gradient Hamiltonian Monte Carlo</p></div></div><a class="source-link" target="_blank" href="https://github.com/zenna/Omega.jl/blob/849f8f613d8d41de8196576a9700c60b4f5aa16a/src/inference/sghmc.jl#L51">source</a><div><div><p>Sample from <code>x | y == true</code> with Metropolis Hasting</p></div></div><a class="source-link" target="_blank" href="https://github.com/zenna/Omega.jl/blob/849f8f613d8d41de8196576a9700c60b4f5aa16a/src/inference/sghmc.jl#L80">source</a></section><p>For example:</p><pre><code class="language-julia">weight = β(2.0, 2.0)
x = bernoulli()
rand(weight, x == 0)</code></pre><p>To sample from more than one random variable, just pass a tuple of <code>RandVar</code>s to <code>rand</code>, e.g.:</p><pre><code class="language-julia">weight = β(2.0, 2.0)
x = bernoulli()
rand(weight, x == 0)</code></pre><h2><a class="nav-anchor" id="Conditioning-with-cond-1" href="#Conditioning-with-cond-1">Conditioning with <code>cond</code></a></h2><p><code>rand(x, y)</code> is simply a shorter way of saying <code>rand(cond(x, y))</code>. That is, the mechanism for inference in Omega is conditioning random variables:</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Omega.cond" href="#Omega.cond"><code>Omega.cond</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>Condition random variable <code>x</code> with random predicate RandVar{Bool}</p><pre><code class="language-julia">x = normal(0.0, 1.0)
x_ = cond(x, x &gt; 0)</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/zenna/Omega.jl/blob/849f8f613d8d41de8196576a9700c60b4f5aa16a/src/cond.jl#L4-L11">source</a><div><div><p>Condition random variable with predicate: cond(x, p) = cond(x, p(x)) <code>cond(poisson(0.5), iseven</code></p></div></div><a class="source-link" target="_blank" href="https://github.com/zenna/Omega.jl/blob/849f8f613d8d41de8196576a9700c60b4f5aa16a/src/cond.jl#L13-L15">source</a></section><h2><a class="nav-anchor" id="Conditioning-as-Prior-1" href="#Conditioning-as-Prior-1">Conditioning as Prior</a></h2><p>Conditioning Random Variables allows you to add constraints to your mode.</p><p>For example we can make a truncated normal distribution with:</p><pre><code class="language-julia">x = normal(0.0, 1.0)
x_ = cond(x, x &gt; 0.0)</code></pre><p>A shorter way to write this is to pass a unary function as the second argument to <code>cond</code></p><pre><code class="language-julia">x = cond(normal(0.0, 1.0), rv -&gt; rv &gt; 0.0)</code></pre><p>Or suppose we want a poisson distribution over the even numbers</p><pre><code class="language-julia">cond(poission(1.0), iseven</code></pre><pre><code class="language-julia">ispos(x) = x &gt; 0.0
weight = cond(normal(72, 1.0), ispos)
height = cond(normal(1.78, 1.0), ispos)
bmi = weight / height</code></pre><p><code>bmi</code> is a function of both <code>weight</code> and <code>height</code>, both of which have their own conditions. Omega automatically propagates the conditions from <code>weight</code> and <code>height</code> onto <code>bmi</code>, so that if we sample from all of them with </p><p><code>rand((bmi, weight, height), alg = Rejection))</code></p><footer><hr/><a class="previous" href="conditionalindependence.html"><span class="direction">Previous</span><span class="title">(Conditional) Independence</span></a><a class="next" href="soft.html"><span class="direction">Next</span><span class="title">Soft Execution</span></a></footer></article></body></html>
